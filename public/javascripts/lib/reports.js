// Generated by CoffeeScript 1.6.3
/*
Reports for Teacher Side
*/


/*
Functions
*/


(function() {
  var issueData;

  issueData = [];

  $(function() {
    var buildTable;
    buildTable = function(arr) {
      var each, _i, _len, _results;
      $('#reportsBody').empty();
      _results = [];
      for (_i = 0, _len = arr.length; _i < _len; _i++) {
        each = arr[_i];
        _results.push($('#reportsBody').append('<tr class="issueRow" data-id=' + each['_id'] + '>' + '<td class="displayName">' + each['displayName'] + '</td>' + '<td class="issueTime" data-time=' + each['timeStamp'] + '>' + each['time'] + '</td>' + '</td><td class="waitTime">' + moment().minutes(each['totalWait']) + '</td>' + '<td>' + each['lesson'] + '</td>' + '<td>' + each['issue'] + '</td>' + '<td>' + each['comment'] + '</td>' + '</tr>'));
      }
      return _results;
    };
    $.get('/reportsInfo', function(data) {
      issueData = data;
      return buildTable(issueData);
    });
    $('th').each(function() {
      return $(this).on('click', function() {
        var sortedData, value;
        value = $(this).attr('data-type');
        sortedData = _.sortBy(issueData, function(arr) {
          return arr[value];
        });
        return buildTable(sortedData);
      });
    });
    /*
    	Filter by name, date, time range, time waited, lesson, issue, comment
    */

    /*
    	Search by name, data, time range, time waited, lesson, issue, comment
    */

  });

}).call(this);
